---
title: "kiwifruit graph theory"
author: "Patrick Snelgar"
date: "`r {format(Sys.Date(), '%d %b %Y')}`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)


library(tidygraph)
library(tidyverse)
library(ggraph)
library(magrittr)
library(htmlwidgets)
library(plotly)
library(ggplot2)
#library(gplots)
library(lubridate)
library(scales)
library(cowplot)
library(here)

source(here("code/theme.R"))

# checking for output folder
if(!dir.exists(here("output"))){
	dir.create(here("output"))
	for(i in 1:9)
		dir.create(paste(here("output/Vine"), i))
} 

if(!dir.exists(here("workspace")))
	dir.create(here("workspace"))
```

```{r vine_data_import, echo = FALSE}
# Set to 'TRUE' if you want to regenerate the files in workspace
redo <- TRUE

source(here("code/data_import/import_all_data.R"))

```

```{r functions, echo = FALSE}

# maximum 9 fruit per shoot
angle <- 2 * pi / 9

pointXOffset <- function (central_xpoint, radius, point_pos){
	return(central_xpoint + radius * cos(point_pos * angle))
}

pointYOffset <- function (central_ypoint, radius, point_pos){
	return(central_ypoint + radius * sin(point_pos * angle))
}

```

```{r all_vines_plot, echo = FALSE}


source(here("code/visualisation/fruit_metrics/all_vines_fruit_metrics.R"))

```

```{r individual_vine_fruit_metrics, echo = FALSE}


source(here("code/visualisation/fruit_metrics/individual_vine_fruit_metrics.R"))

```

```{r vine_architectures, echo = FALSE}


source(here("code/visualisation/vine_architectures.R"))

```